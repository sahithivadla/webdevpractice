<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.4.1/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.min.css">
        <link rel="stylesheet"
        href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" />
        <title>Register</title>
        <!-- <link rel="stylesheet" type="text/css" href="static/style.css"> -->
<style>

body
    {
        background-color:bisque;
    }

    .navbar-brand
      {
          position: absolute;
          width: 60%;
          left: 0;
          text-align: left;
          margin:0 auto;
      }
      .navbar-toggle {
          z-index:3;
      }

    .success, .warning, .error {
        font-family: sans-serif;
        font-size: 18px;
        font-weight: bold;
        border: 1px solid black;
        padding: 2px;
        margin: 5px;
    }
    .success {
    background-color: green;
    }
    .error
    {
        background-color: red;
    }
p    {
       color: red;
    }
    .normal
{
    color:normal
}
label{
        color:black;
        font-weight: bold;
    }
    navbar-brand
      {
          position: absolute;
          width: 60%;
          left: 0;
          text-align: left;
          margin:0 auto;
      }
      .navbar-toggle {
          z-index:3;
      }


</style>

<script>
    document.addEventListener("DOMContentLoaded",function()
    {

        document.querySelector("#form").onsubmit = function()
        {
          // name related checking
          if(document.querySelector("#name").value.length==0 || document.querySelector("#name").value.length>50)
          {
              document.querySelector("#validname").innerHTML = "The prescribed size of name should be between 1-50"
              return false
          }
          else
          {
              // set it back to empty because the error message should not still be there when the user decides to resubmit after giving right name
            document.querySelector("#validname").innerHTML = ""
            // now check for email
            if(document.querySelector("#mail").value.length==0 )
            {
                document.querySelector("#validemail").innerHTML = "You cannot leave the email empty"
                return false
            }
            else
            {
                email = document.querySelector("#mail").value
                const expression = /(?!.*\.{2})^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i;
                var validate = expression.test(String(email).toLowerCase())
                if(validate === false)
                {
                    document.querySelector("#validemail").innerHTML = "The email should be in the form of xxxx@yyyy.zzz"
                    return false
                }
                else
                {
                    document.querySelector("#validemail").innerHTML = ""
                    // now check for password
                    if(document.querySelector("#passw").value.length==0 || document.querySelector("#passw").value.length<6)
                    {
                        document.querySelector("#validpass").innerHTML = "The minimum length of password is 6.You cant leave it empty!"
                        return false
                    }
                    else
                    {
                        // validate password if the field is not empty
                        password = document.querySelector("#passw").value
                        var strongRegex = new RegExp("^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#\$%\^&\*])(?=.{8,})");
                        val  = strongRegex.test(String(password))
                        if(val === false)
                        {
                            document.querySelector("#validpass").innerHTML = "The password should have atleast 1 upper case char,1 lower case char ,1 digit and 1 sp"
                            return false
                        }
                        else
                        {
                            document.querySelector("#validpass").innerHTML = ""
                            if(document.querySelector("#cpassw").value.length==0)
                            {
                                document.querySelector("#passwrdnotmatch").innerHTML = "You cant leave this field empty"
                                return false
                            }
                            else
                            {
                            //now check if confirm password value is an exact match to the password value

                                if(String(document.querySelector("#passw").value) === String( document.querySelector("#cpassw").value))
                                {
                                    return true

                                }
                                else
                                {
                                    // all the checks have been cleared , so make a request to server
                                    document.querySelector("#passwrdnotmatch").innerHTML = "Password Mismatch"
                                    return false
                                }

                            }


                        }

                    }


                }


            }


          }
        }
    });
</script>
</head>
<body>


            <nav class="navbar navbar-expand-sm bg-dark navbar-dark">
                    <a  class="navbar-brand" href=""> &nbsp;&nbsp; JavaScript</a>
                    <ul class="navbar-nav ml-auto">
                    <!-- <li class="nav-item">
                    <a class="nav-link" href="/index"><b>Home</b></a>
                    </li> -->
                    <li class="nav-item">
                    <a class="nav-link" href="/register"><b>Register</b></a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="/login"><b>Login</b></a>
                    </li>
                    <li class="nav-item">
                    <a class="nav-link" href="#"><b>Contact Us</b></a>
                    </li>
                    </ul>
                </nav>




    <div class="container" >
        <div class="row" style="margin-top: 40px">
            <div class="col-sm-6">
                <form id="form" action="https://www.w3schools.com/js/default.asp">
                        <div class="form-group">
                        <label   for="name">Name : </label>
                        <input id="name" class="form-control" >
                      </div>
                      <p id="validname"></p>
                    <div class="form-group">
                      <label   for="email">Email : </label>
                      <input  class="form-control" id="mail">
                    </div>

                    <p id="validemail"></p>

                    <div class="form-group">
                      <label for="password">Password : </label>
                      <input type="password" class="form-control" id="passw" >
                    </div>


                    <p id="validpass"></p>


                    <div class="form-group">
                            <label  for="password">Confirm Password : </label>
                            <input type="password" class="form-control" id="cpassw" >
                    </div>

                    <p id="passwrdnotmatch"></p>


                     <br>

                    <button style="background-color:rgb(45,45,45);color: white;" type="submit" id="submit">Register</button>

                </form>
            </div>
        </div>
    </div>
    <br>

<!-- Latest compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.0/jquery.slim.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
</body>
</html>